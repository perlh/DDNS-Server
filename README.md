# DDNS-Server

- ddns服务器端
- DDNS（Dynamic Domain Name Server，动态域名服务）是将用户的动态IP地址映射到一个固定的域名解析服务上，用户每次连接网络的时候客户端程序就会通过信息传递把该主机的动态IP地址传送给位于服务商主机上的服务器程序
  
## 实现的功能

- 自动更新域名解析到本机IP,每隔5min向dns服务器同步IP信息
- 支持A记录（IPV4）和AAAA记录（IPV6）
- 每条记录将设置计时器，当客户端与DNS服务器长期（10min）未同步时，将删除客户端的DNS记录。
- 支持查看dns记录表

## 使用
1. 首先得拥有自己的域名
2. 首先在云解析DNS上添加NS记录（比如d.hsm.cool 服务器指向www.hsm.cool）
3. 在服务区上运行`ddns服务器程序`
4. 在本地运行ddns客户端,如`./ddns -i eth0 -t 6 -d test.d.hsm.cool -s www.hsm.cool`

域名test.d.hsm.cool和本地客户端ip进行绑定。

``` bash
hsm@orangepizero2 ~> ./ddns 
```

## 例子
``` bash
2022/10/18 18:58:55 222.204.59.190:32784 添加解析记录成功， o.d.hsm.cool 新IP: 222.204.59.190
2022/10/18 18:58:55 222.204.59.190:47258 更新DNS记录成功，域名： o.d.hsm.cool 新IP: 222.204.59.190
2022/10/18 18:58:55 222.204.59.190:52676 查询DNS解析记录成功!
		2788.www.hsm.cool  2001:250:6c00:1002::4:7883 2
		185.www.hsm.cool  222.204.59.190 2
		o.d.hsm.cool  222.204.59.190 4
2022/10/18 18:59:24 117.169.16.206:54816 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:24 117.169.16.198:54118 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:24 117.169.16.198:28586 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:25 60.215.138.169:57820 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:25 60.215.138.169:50515 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:41 182.98.160.83:34004 查询DNS成功 o.d.hsm.cool 222.204.59.190
2022/10/18 18:59:41 182.98.160.83:34829 查询DNS成功 o.d.hsm.cool 222.204.59.190
```
